#!/usr/bin/env bash

h=/home/aghost-7

create-container() {
}

run-dev() {
	slipway start aghost7/$1:$2
}

run-db() {
	if [ "$(docker ps | awk "\$2 ~ /$1/ { print \$1 }")" == "" ]; then
		docker run --rm --name "$1" "aghost7/$1:$2"
		exit 0
	fi
	docker exec -ti "$1" bash
}

case "$1" in
	c)
		run-dev c-dev latest
		;;
	ruby)
		run-dev ruby-dev latest
		;;
	py)
		run-dev py-dev bionic
		;;
	rust)
		run-dev rust-dev nightly
		;;
	node)
		run-dev nodejs-dev bionic-carbon
		;;
	scala)
		run-dev scala-dev latest
		;;
	go)
		run-dev go-dev 1.6
		;;
	cljs)
		run-dev cljs-dev latest
		;;
	pg)
		run-db pg-dev 9.3
		;;
	my)
		run-db my-dev 5.6
		;;
	*)
		echo Bad argument \"$1\"
		exit 1
		;;
esac
